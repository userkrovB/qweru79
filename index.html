<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Pac-Man Go</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            background-color: #000;
            color: #fff;
            font-family: Arial, sans-serif;
        }

        #game-board {
            width: 400px;
            height: 400px;
            border: 2px solid #333;
            position: relative;
            background-color: #000;
            overflow: hidden;
        }

        #score {
            margin-top: 10px;
            font-size: 20px;
        }

        #game-over {
            display: none;
            font-size: 30px;
            color: red;
            margin-top: 20px;
        }

        .pacman {
            width: 30px;
            height: 30px;
            background-color: yellow;
            border-radius: 50%;
            position: absolute;
            z-index: 10;
        }

        .coin {
            width: 10px;
            height: 10px;
            background-color: gold;
            border-radius: 50%;
            position: absolute;
        }

        .enemy {
            width: 30px;
            height: 30px;
            background-color: red;
            border-radius: 50%;
            position: absolute;
            z-index: 5;
        }
    </style>
</head>
<body>
    <div id="game-board"></div>
    <div id="score">Счёт: <span>0</span></div>
    <div id="game-over">Игра окончена!</div>

    <script>
        document.addEventListener("DOMContentLoaded", () => {
            const board = document.getElementById("game-board");
            const scoreDisplay = document.querySelector("#score span");
            const gameOverDisplay = document.getElementById("game-over");
            const boardSize = 400;

            let score = 0;
            let pacman = {
                x: 20,
                y: 20,
                speed: 5
            };
            let enemies = [];
            let coins = [];
            let keys = {};
            let gameRunning = true;

            // Создаём Pac-Man
            const pacmanEl = document.createElement("div");
            pacmanEl.classList.add("pacman");
            board.appendChild(pacmanEl);

            // Обновляем позицию Pac-Man
            function updatePacman() {
                pacmanEl.style.left = pacman.x + "px";
                pacmanEl.style.top = pacman.y + "px";
            }

            // Создаём монеты
            function createCoins() {
                for (let i = 0; i < 10; i++) {
                    const coin = document.createElement("div");
                    coin.classList.add("coin");
                    coin.x = Math.floor(Math.random() * (boardSize - 20));
                    coin.y = Math.floor(Math.random() * (boardSize - 20));
                    coin.style.left = coin.x + "px";
                    coin.style.top = coin.y + "px";
                    board.appendChild(coin);
                    coins.push(coin);
                }
            }

            // Создаём врагов
            function createEnemies() {
                for (let i = 0; i < 3; i++) {
                    const enemy = document.createElement("div");
                    enemy.classList.add("enemy");
                    enemy.x = Math.floor(Math.random() * (boardSize - 40));
                    enemy.y = Math.floor(Math.random() * (boardSize - 40));
                    enemy.speedX = (Math.random() > 0.5 ? 1 : -1) * 2;
                    enemy.speedY = (Math.random() > 0.5 ? 1 : -1) * 2;
                    enemy.style.left = enemy.x + "px";
                    enemy.style.top = enemy.y + "px";
                    board.appendChild(enemy);
                    enemies.push(enemy);
                }
            }

            // Обработка нажатий
            document.addEventListener("keydown", (e) => {
                keys[e.key] = true;
            });
            document.addEventListener("keyup", (e) => {
                keys[e.key] = false;
            });

            // Движение Pac-Man
            function movePacman() {
                if (keys["ArrowUp"] && pacman.y > 0) pacman.y -= pacman.speed;
                if (keys["ArrowDown"] && pacman.y < boardSize - 30) pacman.y += pacman.speed;
                if (keys["ArrowLeft"] && pacman.x > 0) pacman.x -= pacman.speed;
                if (keys["ArrowRight"] && pacman.x < boardSize - 30) pacman.x += pacman.speed;
                updatePacman();
            }

            // Движение врагов
            function moveEnemies() {
                enemies.forEach(enemy => {
                    enemy.x += enemy.speedX;
                    enemy.y += enemy.speedY;

                    if (enemy.x <= 0 || enemy.x >= boardSize - 40) enemy.speedX *= -1;
                    if (enemy.y <= 0 || enemy.y >= boardSize - 40) enemy.speedY *= -1;

                    enemy.style.left = enemy.x + "px";
                    enemy.style.top = enemy.y + "px";
                });
            }

            // Проверка столкновений с монетами
            function checkCoinCollisions() {
                coins.forEach((coin, index) => {
                    const distX = Math.abs(pacman.x - coin.x);
                    const distY = Math.abs(pacman.y - coin.y);
                    if (distX < 20 && distY < 20) {
                        coin.remove();
                        coins.splice(index, 1);
                        score++;
                        scoreDisplay.textContent = score;
                    }
                });
            }

            // Проверка столкновений с врагами
            function checkEnemyCollisions() {
                enemies.forEach(enemy => {
                    const distX = Math.abs(pacman.x - enemy.x);
                    const distY = Math.abs(pacman.y - enemy.y);
                    if (distX < 30 && distY < 30) {
                        gameRunning = false;
                        gameOverDisplay.style.display = "block";
                    }
                });
            }

            // Игровой цикл
            function gameLoop() {
                if (!gameRunning) return;
                movePacman();
                moveEnemies();
                checkCoinCollisions();
                checkEnemyCollisions();
                requestAnimationFrame(gameLoop);
            }

            // Запуск игры
            createCoins();
            createEnemies();
            updatePacman();
            gameLoop();
        });
    </script>
</body>
</html>